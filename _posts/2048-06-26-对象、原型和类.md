---
layout:     post
title:      "对象、原型和类"
date:       "2018-03-16 "
author:     "guozhaodong"
---

## 对象的创建

1、对象字面量的方式创建

``` js
    var obj = {};

    var person = {
        name:'xiaoming',
        age:'18'
    }
```

2、通过`new`关键字来创建

``` js
    var obj = new Object();

    var person = new Object();
    person.name = 'xiaoming';
    person.age = '18'
```

`new`后面接构造函数，除了`js`内置的构造函数外，我们也可以自己去定义一个构造函数

3、`Object.create()`方法去创建

``` js
    var obj = Object.create(Object.prototype);

    var person = Object.create(Object.prototype);
    person.name = 'xiaoming';
    person.age = '18'
```

## 原型

### 什么是原型？

首先它就是一个普通的对象。当我们创建一个函数`A`的时候，浏览器会按照一定规则在内存中创建一个对象`B`，同时这个函数`A`有一个属性叫`prototype`,它的值指向了这个对象`B`，这个对象`B`就是函数`A`的原型对象，简称函数原型。

``` js
function Hello(){

}

Hello.prototype
```

![image](/img/prototype/TM20180627095018.png)

上图红框处就是这个函数`Hello`的原型。这个原型对象中只有两个属性，一个叫`constructor`，这个属性的值是函数`Hello`。还有一个`__proto__`属性，这个属性的值指向的是`Object`构造函数的原型，这个属性其实就是用来继承的，通过它就实现了所谓的原型链。

> 下图就展示了函数和它的原型对象的关系

![image](/img/prototype/20180627155732.jpg)

### 通过`new`构造函数来创建对象

把一个函数作为构造函数使用`new`实例化后，浏览器会创建一个对象，同时这个对象还会有一个属性`__proto__`，这个属性的值指向这个构造函数的原型

> ps:其实每个函数都可以作为构造函数进行实例化，不过正常情况下我们为了区分普通函数和构造函数，就把名称首字母大写的函数作为构造函数。

``` js
 var he1 = new Hello()
```

![image](/img/prototype/TM20180627164502.png)

上图红框处展示了构造函数`Hello`实例化出来一个对象`he1`，这个`he1`对象有一个属性叫`__proto__`,这个属性的值指向这个构造函数`Hello`的原型对象，

> 下图展示了对象`he1`和它构造函数原型的关系

![image](/img/prototype/20180627164349.jpg)

从上图中我们可以总结出当我们多次调用`new Hello()`实例化多个对象，那么这些对象的`__proto__`属性的值都会指向`Hello.prototype`，则这些对象可以共享原型对象上的方法。

``` js
    function Hello(){

    }
    //使用Hello.prototype直接给原型对象添加属性
    Hello.prototype.title = 'Hello World'; 

    var he1 = new Hello();
    //访问he1的title属性，浏览器引擎会先查找he1对象上有没有这个title属性，如果发现没有找到这个属性，那么它回去它的构造函数的原型对象上找
    console.log(he1.title)  //Hello World


    var he2  = new Hello();
    //两个对象的title都是从它构造函数的原型对象上找到的，所以是相等的
    console.log(he1.title === he2.title) //true

    //通过实例对象是不能修改原型对象的属性的，所以下面是给he1对象自身添加一个title属性，不会修改它构造函数原型对象的属性
    he1.title = 'Hello xiaoming';
    console.log(he1.title); //Hello xiaoming
    console.log(he2.title)  //Hello World
```

### 和原型相关的方法或属性

1、`__proto__`和`prototype`

1.1、首先说先`__proto__`属性，这个其实是一个非标准的属性，在一些浏览器中会用这种写法来表示,`es5`将该属性成为`[[Prototype]]`







